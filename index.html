<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Control de Proveedores</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1><i class="fas fa-truck"></i> Control de Proveedores</h1>
            <button id="btnTogglePanel" class="toggle-panel-btn">
                <i class="fas fa-bars"></i> Menú
            </button>
        </div>

        <!-- Modo Edición de Proveedores (inicialmente oculto) -->
        <div id="modoEdicionProveedores" class="modo-edicion-proveedores" style="display: none;">
            <div class="edicion-header">
                <h2><i class="fas fa-edit"></i> Edición de Proveedores</h2>
                <button id="btnCerrarEdicion" class="btn-cerrar-edicion-principal">
                    <i class="fas fa-times"></i> Cerrar Edición
                </button>
            </div>
            
            <div class="edicion-content">
                <!-- Formulario para agregar nuevos proveedores -->
                <div class="formulario-nuevo-proveedor">
                    <h3><i class="fas fa-plus-circle"></i> Agregar Nuevo Proveedor</h3>
                    <div class="formulario-proveedor-grid">
                        <input type="text" id="nombreNuevoProveedor" placeholder="Nombre del proveedor" class="form-input">
                        <input type="number" id="diasNuevoProveedor" placeholder="Días de vencimiento" class="form-input">
                        <button id="btnAgregarNuevoProveedor" class="btn-agregar-nuevo">
                            <i class="fas fa-plus"></i> Agregar Proveedor
                        </button>
                    </div>
                </div>
                
                <!-- Buscador y lista de proveedores -->
                <div class="proveedores-edicion-container">
                    <div class="buscador-proveedores">
                        <input type="text" id="buscadorProveedores" placeholder="Buscar proveedores..." class="form-input">
                        <i class="fas fa-search buscador-icono"></i>
                    </div>
                    
                    <div class="lista-proveedores-edicion">
                        <div id="listaProveedoresEdicion" class="proveedores-edicion-lista">
                            <!-- Los proveedores se cargarán aquí dinámicamente -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="contenidoPrincipal" class="contenido-principal">
            <div class="form-container">
                <input type="hidden" id="currentIndex">
                <div class="autocomplete">
                    <input id="proveedor" type="text" placeholder="Proveedor" required>
                    <i class="fas fa-search autocomplete-icon"></i>
                </div>
                <input type="number" id="numBol" placeholder="N° Boleta (5 dígitos)" oninput="this.value=this.value.slice(0,5)" required>
                <select id="formaPago" required>
                    <option value="">Forma de Pago</option>
                    <option value="Efectivo">Efectivo</option>
                    <option value="Transferencia">Transferencia</option>
                    <option value="Cheques">Cheques</option>
                </select>
                <input type="number" id="importe" placeholder="Importe" step="0.01" min="0" required>
                <input type="date" id="fecha" required>
                <input type="number" id="pagado" placeholder="Pagado" step="0.01" min="0">
                <div class="checkbox-container">
                    <input type="checkbox" id="pagadoCheckbox" onchange="togglePagado()">
                    <label for="pagadoCheckbox">Pagado Total</label>
                </div>
                <div class="form-buttons">
                    <button id="btnAgregar" onclick="agregarOActualizarProveedor()">
                        <i class="fas fa-plus"></i> Agregar / Actualizar
                    </button>
                    <button id="btnLimpiar" onclick="limpiarFormulario()">
                        <i class="fas fa-broom"></i> Limpiar
                    </button>
                    <button id="btnBorrar" onclick="borrarProveedor()" style="display:none;">
                        <i class="fas fa-trash"></i> Borrar
                    </button>
                    <input type="file" id="fileInput" style="display:none" onchange="cargarTxt(event)" accept=".txt">
                </div>
            </div>

        <div class="aporte-container">
            <h2><i class="fas fa-money-bill-wave"></i> Aporte de Proveedor</h2>
            <select id="aporteProveedor">
                <option value="">Seleccione un proveedor</option>
            </select>
            <input type="number" id="aporteMonto" placeholder="Monto del Aporte" step="0.01" min="0">
            <button id="btnAportar" onclick="aportarDinero()">
                <i class="fas fa-hand-holding-usd"></i> Aportar
            </button>
        </div>

        <div class="filters-container">
            <div class="search-box">
                <input type="text" id="searchInput" placeholder="Buscar proveedor, boleta, forma de pago...">
                <i class="fas fa-search"></i>
            </div>
            <div class="filter-controls">
                <select id="estadoFilter">
                    <option value="">Todos los estados</option>
                    <option value="Pagado">Pagado</option>
                    <option value="Pendiente">Pendiente</option>
                    <option value="Vencido">Vencido</option>
                    <option value="No Vencido">No Vencido</option>
                </select>
                <select id="proveedorFilter">
                    <option value="">Todos los proveedores</option>
                </select>
                <button id="btnLimpiarFiltros" onclick="limpiarFiltros()">
                    <i class="fas fa-times"></i> Limpiar
                </button>
            </div>
        </div>

        <div class="table-container">
            <div class="table-header">
                <h3><i class="fas fa-table"></i> Registros de Proveedores</h3>
                <span id="registrosCount" class="registros-count">0 registros</span>
            </div>
            <div class="table-scroll-container">
            <table>
                <thead>
                    <tr>
                        <th onclick="ordenarTabla('proveedor')" class="sortable">
                            Proveedor <i class="fas fa-sort"></i>
                        </th>
                        <th onclick="ordenarTabla('numBol')" class="sortable">
                            N° Boleta <i class="fas fa-sort"></i>
                        </th>
                        <th onclick="ordenarTabla('formaPago')" class="sortable">
                            Forma de Pago <i class="fas fa-sort"></i>
                        </th>
                        <th onclick="ordenarTabla('importe')" class="sortable">
                            Importe <i class="fas fa-sort"></i>
                        </th>
                        <th onclick="ordenarTabla('fecha')" class="sortable">
                            Fecha <i class="fas fa-sort"></i>
                        </th>
                        <th onclick="ordenarTabla('pagado')" class="sortable">
                            Pagado <i class="fas fa-sort"></i>
                        </th>
                        <th onclick="ordenarTabla('estado')" class="sortable">
                            Estado <i class="fas fa-sort"></i>
                        </th>
                    </tr>
                </thead>
                <tbody id="tablaProveedores">
                    <!-- Las filas se agregarán aquí -->
                </tbody>
            </table>
        </div>
        </div>

        <div class="total-section">
            <div class="total-card">
                <h3><i class="fas fa-exclamation-triangle"></i> Vencidas</h3>
                <p id="totalVencidas">$0</p>
            </div>
            <div class="total-card">
                <h3><i class="fas fa-clock"></i> No Vencidas</h3>
                <p id="totalNoVencidas">$0</p>
            </div>
            <div class="total-card">
                <h3><i class="fas fa-check-circle"></i> Pagado</h3>
                <p id="totalPagado">$0</p>
            </div>
            <div class="total-card">
                <h3><i class="fas fa-calculator"></i> Total</h3>
                <p id="totalGeneral">$0</p>
            </div>
        </div>
    </div>
    
    <!-- Panel deslizante -->
    <div id="sidePanel" class="side-panel">
        <div class="panel-header">
            <h2><i class="fas fa-cogs"></i> Herramientas</h2>
            <button id="btnClosePanel" class="close-panel-btn">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="panel-content">
            <button id="btnVerProveedores" class="panel-button">
                <i class="fas fa-list"></i> Ver Proveedores
            </button>
            <button id="btnGuardarTxt" onclick="guardarTxt()" class="panel-button">
                <i class="fas fa-file-alt"></i> Guardar TXT
            </button>
            <button id="btnGuardarExcel" onclick="guardarExcel()" class="panel-button">
                <i class="fas fa-file-excel"></i> Guardar Excel
            </button>
            <button id="btnCargarTxt" onclick="document.getElementById('fileInput').click()" class="panel-button">
                <i class="fas fa-upload"></i> Cargar Respaldo
            </button>
            <button id="btnBorrarTodo" onclick="borrarTodo()" class="panel-button borrar-todo-button">
                <i class="fas fa-trash-alt"></i> Borrar Todo
            </button>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast"></div>

    <script src="script.js"></script>
</div>
</body>
</html>